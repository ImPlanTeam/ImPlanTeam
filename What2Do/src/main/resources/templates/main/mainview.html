<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>오늘 뭐하지?</title>
  <link rel="stylesheet" th:href="@{/css/common.css}">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .slider__wrap {
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        position: relative;
    }

    .slider__img {
        height: auto;
        aspect-ratio: 16 / 9;
        background-color: #f0f0f0;
    }

    .slider__inner {
        display: flex;
        width: 100%;
    }

    .slider {
        flex-shrink: 0;
        width: 100%;
    }

    .slider__btn button {
        font-size: 24px;
    }

    .slider__dot .dot {
        width: 14px;
        height: 14px;
        background: rgba(0,0,0,0.4);
        border-radius: 50%;
        text-indent: -9999px;
        transition: background 0.3s;
        cursor: pointer;
    }

    .slider__dot .dot.active {
        background: rgba(255,255,255,0.9);
    }
  </style>
</head>
<body class="bg-white text-gray-800">

<!-- 상단 네비게이션 -->
<div th:replace="~{fragments/top :: headerFragment}"></div>

<!-- 슬라이드 + 공지사항 -->
<section class="flex flex-col md:flex-row p-4 gap-4 items-start">

  <!-- 슬라이드 배너 -->
  <main id="main" class="w-full md:w-2/3">
    <section id="sliderType01">
      <div class="slider__wrap relative">
        <div class="slider__img relative overflow-hidden rounded-xl shadow-lg">
          <div class="slider__inner flex transition-all duration-500">
            <div class="slider" role="group" aria-label="1/4"><img src="/img/배너1.PNG" alt="이미지1" class="w-full h-auto"></div>

            <div class="slider" role="group" aria-label="2/4">
              <a href="/lego" class="block w-full h-full relative z-10">
                <img src="/img/배너2.PNG" alt="배너 이미지" class="w-full h-full object-cover rounded-xl">
              </a>
            </div>

            <div class="slider" role="group" aria-label="3/4"><img src="/img/배너3.PNG" alt="이미지3" class="w-full h-auto"></div>
            <div class="slider" role="group" aria-label="4/4"><img src="/img/배너4.PNG" alt="이미지4" class="w-full h-auto"></div>
          </div>

          <!-- 좌우 버튼 -->
          <div class="slider__btn absolute top-1/2 left-0 w-full flex justify-between items-center px-4 z-10">
            <button class="prev bg-black/50 text-white w-10 h-10 rounded-full flex items-center justify-center transition">
              &#10094;
            </button>
            <button class="next bg-black/50 text-white w-10 h-10 rounded-full flex items-center justify-center transition">
              &#10095;
            </button>
          </div>

          <!-- 닷 버튼 -->
          <div class="slider__dot absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2 z-10">
            <!-- JS에서 자동 생성 -->
          </div>
        </div>
      </div>
    </section>
  </main>
  <!-- 공지사항 -->
  <div class="w-full md:w-1/3 p-4 bg-white rounded-lg shadow">
    <h2 class="text-lg font-semibold mb-3"> 공지사항</h2>
    <ul class="text-sm space-y-1">
      <li th:each="board : ${blist}">
        <a class="hover:underline" th:href="@{/view(num=${board.num})}">
          • [[${board.title}]]
        </a>
      </li>
      <li th:if="${#lists.isEmpty(blist)}">등록된 공지사항이 없습니다.</li>
    </ul>
  </div>
</section>


<!-- 인기 관광지 BEST 4 -->
<section class="p-4">
  <h2 class="text-xl font-bold mb-4"> 인기 관광지 BEST 5</h2>
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
    <div class="bg-white rounded-xl shadow hover:shadow-md transition duration-300 overflow-hidden"
         th:each="bestFive : ${bestFive}"
         th:onclick="|location.href='@{detail(id=${bestFive.id})}'|">
      <img alt="" class="w-full h-48 object-cover" th:src="${bestFive.firstimage2}"/>
      <div class="p-3 text-center">
        <p class="text-base font-semibold text-gray-800 truncate" th:text="${bestFive.title}"></p>
      </div>
    </div>
  </div>
</section>

<!-- 하단 -->
<div th:replace="~{fragments/footer :: footerFragment}"></div>

<!-- 슬라이드 스크립트 -->
<script>
  const sliderInner = document.querySelector(".slider__inner");
const sliders = document.querySelectorAll(".slider");
const sliderDot = document.querySelector(".slider__dot");

let currentIndex = 0;
const sliderCount = sliders.length;
const sliderWidth = document.querySelector(".slider__img").offsetWidth;

// 닷 메뉴 생성
sliderDot.innerHTML = "";
sliders.forEach((_, idx) => {
   const dot = document.createElement("span");
   dot.className = "dot";
   dot.title = `이미지 ${idx + 1}`;
   dot.addEventListener("click", () => gotoSlider(idx));
   sliderDot.appendChild(dot);
});
sliderDot.children[0]?.classList.add("active");

// 슬라이드 이동
function gotoSlider(index) {
   sliderInner.style.transform = `translateX(-${sliderWidth * index}px)`;
   currentIndex = index;
   Array.from(sliderDot.children).forEach(dot => dot.classList.remove("active"));
   sliderDot.children[index]?.classList.add("active");
}

// 좌우 버튼 이벤트
document.querySelector(".prev").addEventListener("click", () => {
   const prev = (currentIndex - 1 + sliderCount) % sliderCount;
   gotoSlider(prev);
});
document.querySelector(".next").addEventListener("click", () => {
   const next = (currentIndex + 1) % sliderCount;
   gotoSlider(next);
});
</script>
</body>
</html>